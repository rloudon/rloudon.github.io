---
title: "MadR - Portable R Shiny Apps"
subtitle: 
author: "Robert Loudon"
date: "January 20, 2016"
published: false
status: process
output: 
  knitrBootstrap::simple_document:
    toc: true
    theme: flatly
    show_code: FALSE
    bootstrap.type: simple
    bootstrap.show.warning: FALSE
    bootstrap.show.message: FALSE
    bootstrap.show.error: FALSE
    highlight: github
    theme.chooser: FALSE
    custom.header: before_body.html
bootstrap.thumbnail: FALSE

---


<style type="text/css">

body {
padding-top: 50px;
padding-bottom: 40px;
}

h1 {
padding-top: 55px;
margin-top: -55px;
}

h2 {
padding-top: 55px;
margin-top: -55px;
}

h3 {
padding-top: 55px;
margin-top: -55px;
}

.dropdown-menu>li>a {
color: black;
}

#disqus_thread {
margin-top: 45px;
}

#toc {
padding-top: 55px;
margin-top: 55px;
}

h1:not(.title) {
  text-align: center;
  display: flex;
  flex-direction: row;
  justify-content: center;
 }

h1:not(.title):before, 
h1:not(.title):after {
    flex-grow:1;
  height: 1px;
  content: '\a0';
  background-color: #ddd;
  align-self: center;
}

h1:not(.title):before {
  margin-right:10px;
}

h1:not(.title):after {
  margin-left:10px;
}


h1,
h2,
h3,
h4 {
  margin-top: -10px; 
}



</style>


<div class="navbar navbar-default navbar-fixed-top" role="navigation">
<div class="container">
<div class="navbar-header">
<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="/">Market Research</a>
</div>
<div id="navbar" class="navbar-collapse collapse">
<ul class="nav navbar-nav">
<li><a href="/">Home</a></li>
<li class="dropdown">
<a href="product" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expand="false">Product <span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Commercial </li>
<li><a href="authoring_basics.html">Individual & Small Group </a></li>
<li><a href="authoring_basics.html">Large Group & ASO </a></li>
<li class="divider"></li>
<li class="dropdown-header">Government </li>
<li><a href="medicare.html">Medicare </a></li>
<li><a href="medicaid.html">Medicaid </a></li>
</ul>
</li>

<li class="dropdown">
<a href="market_share" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expand="false">Market Share <span class="caret"></span></a>
<ul class="dropdown-menu" role="menu">
<li class="dropdown-header">OCI Market Share </li>
<li><a href="oci_map_2015.html">OCI Market Share 2015 </a></li>
<li><a href="authoring_basics.html">Large Group & ASO </a></li>
<li class="divider"></li>
<li class="dropdown-header">Health Leaders </li>
<li><a href="medicare.html">Health Leaders 2015 </a></li>

</ul>
</li>

</ul>
</div>
</div>
</div>


# Portable R with Shiny

1. Preparing

2. Packaging

3. Publish

Bonus: TopoJSON mapping versus Shapefiles

```{r Global Chunk Setup, include=FALSE}
knitr::opts_chunk$set(comment = NA, bootstrap.show.code = FALSE, bootstrap.show.output = FALSE, message=F, warning=F, error=F)

```



## Test

```{r results = 'asis', comment = NA, echo=F, results="asis"}
require(rCharts)
require(knitr)
hair_eye_male <- subset(as.data.frame(HairEyeColor), Sex == "Male")
n1 <- nPlot(Freq ~ Hair, group = "Eye", data = hair_eye_male, 
            type = 'multiBarChart')
n1$show("iframesrc", cdn = TRUE)
n1$print('fig1')
n1$show("iframesrc")

```

```{r nation, echo = F}
summary(cars$dist)

```



## R Markdown

This is an R Markdown presentation. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown.



# Slide with R Code and Output

```{r states, echo=F}
summary(cars)
```

# Leaflet HTMLWidget

```{r, echo=F}
library(leaflet)

m <- leaflet() %>%
  addTiles() %>%  # Add default OpenStreetMap map tiles
  addMarkers(lng=174.768, lat=-36.852, popup="The birthplace of R")
m  # Print the map
```

# Parallel Coordinates

```{r echo = F, message = F, comment = NA, results="asis"}
library(rCharts)
data(economics, package = "ggplot2")
econ <- transform(economics, date = as.character(date))
m1 <- mPlot(x = "date", y = c("psavert", "uempmed"), type = "Line", data = econ)
m1$set(pointSize = 0, lineWidth = 1)
m1$show("iframesrc", cdn = TRUE)
```

# NVD3 Plot Iframe

```{r rcht, message=FALSE, echo=FALSE, results='asis'}   
library(rCharts)
   options(rcharts.mode = 'iframesrc', rcharts.cdn =TRUE)
n1 <- rPlot(mpg ~ wt | cyl, data = mtcars, color = "gear", type = "point")
n1$show("iframesrc", cdn = TRUE)
```

# DataTable

```{r echo = F, message = F, comment = NA, results="asis", cache=F}
library(xtable)
data(iris)
print(xtable(head(iris, 10)), type = "html", include.rownames = F)

dt <- DT::datatable(mtcars)
dt
#htmlwidgets::saveWidget(dt, 'dt.html')
#cat('<iframe src="dt.html" allowtransparency="true"> </iframe>')
```

```{r echo = F, message = F, comment = NA, results="asis", cache=F}
library(xtable)
x <- matrix(rnorm(1000), ncol = 10)
x <- x[1:30, ]
x.side <- xtable(x, caption = "A sideways table")
print(x.side, floating = TRUE, floating.environment = "sidewaystable", type="html")
```

```{r xtable, results="asis",echo=F}
n <- 100
x <- rnorm(n)
y <- 2*x + rnorm(n)
out <- lm(y ~ x)
library(xtable)
tab <- xtable(summary(out)$coef, digits=c(0, 2, 2, 1, 2))
print(tab, type="html")
```


```{r, echo=F, results="asis",echo=F}
library(ggplot2) ##
library(plotly)
ggiris <- ggplot(data = iris, aes(x=Petal.Width, y=Sepal.Length, color = Species))  + geom_point() + stat_smooth(method = "lm")  + theme_bw() 
py<-ggplotly(ggiris) 
py


```

# Slide 4

```{r, echo=F}
library(ggplot2)
ggplot(mtcars, aes(y = mpg, x = wt)) + geom_point() + stat_smooth(method = "lm")
```


Authored by [Robert Loudon](mailto:robert.loudon@deancare.com)
